(()=>{"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_typeof(i)?i:String(i)),n)}var o,i}var e=function(){function EventEmitter(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(EventEmitter,[{key:"on",value:function on(e,t){var r;this._events.has(e)||this._events.set(e,new Set),null===(r=this._events.get(e))||void 0===r||r.add(t)}},{key:"off",value:function off(e,t){var r;this._events.has(e)&&(this._events.get(e).delete(t),0===(null===(r=this._events.get(e))||void 0===r?void 0:r.size)&&this._events.delete(e))}},{key:"emit",value:function emit(e,t){this._events.forEach((function(r,n){"*"===n&&r.forEach((function(r){return r({eventName:e,data:t})})),(n instanceof RegExp&&n.test(e)||n===e)&&r.forEach((function(e){return e(t)}))}))}},{key:"onAll",value:function onAll(e){this.on("*",e)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(e,t){var r=this;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.emit(e,Object.assign(Object.assign({},n||{}),t||{}))}}}]),EventEmitter}();function data_typeof(e){return data_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},data_typeof(e)}function data_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function data_toPrimitive(e,t){if("object"!==data_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==data_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===data_typeof(i)?i:String(i)),n)}var o,i}var t=function(){function Data(e){!function data_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Data),this.eventManager=e,this._products=[]}return function data_createClass(e,t,r){return t&&data_defineProperties(e.prototype,t),r&&data_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Data,[{key:"productList",get:function get(){return this._products},set:function set(e){this._products=e,this.eventManager.emit("products:updated")}},{key:"previewProduct",value:function previewProduct(e){this.selectedProduct=e,this.eventManager.emit("productPreview:open",e)}}]),Data}();function card_typeof(e){return card_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},card_typeof(e)}function card_defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function card_toPrimitive(e,t){if("object"!==card_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==card_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===card_typeof(i)?i:String(i)),n)}var o,i}var r=function(){function Card(e,t,r){!function card_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Card),this.events=t,this._categoryColors={дополнительное:"additional","софт-скил":"soft",кнопка:"button","хард-скил":"hard",другое:"other"},this._cardElement=e.content.querySelector(".product-card").cloneNode(!0),this._categoryElement=this._cardElement.querySelector(".product-card__category"),this._titleElement=this._cardElement.querySelector(".product-card__title"),this._imageElement=this._cardElement.querySelector(".product-card__image"),this._priceElement=this._cardElement.querySelector(".product-card__price"),(null==r?void 0:r.handleClick)&&this._cardElement.addEventListener("click",r.handleClick)}return function card_createClass(e,t,r){return t&&card_defineProperties(e.prototype,t),r&&card_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Card,[{key:"setElementText",value:function setElementText(e,t){e&&(e.textContent=String(t))}},{key:"category",set:function set(e){this.setElementText(this._categoryElement,e),this._categoryElement.className="product-card__category product-card__category_".concat(this._categoryColors[e])}},{key:"formatPrice",value:function formatPrice(e){return null===e?"Бесценно":"".concat(e," синапсов")}},{key:"render",value:function render(e){return this._categoryElement.textContent=e.itemCategory,this.category=e.itemCategory,this._titleElement.textContent=e.itemTitle,this._imageElement.src=e.itemImage,this._imageElement.alt=this._titleElement.textContent,this._priceElement.textContent=this.formatPrice(e.itemPrice),this._cardElement}}]),Card}();function isSelector(e){return"string"==typeof e&&e.length>1}function ensureElement(e,t){if(isSelector(e)){var r=function ensureAllElements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(e))return Array.from(t.querySelectorAll(e));if(e instanceof NodeList)return Array.from(e);if(Array.isArray(e))return e;throw new Error("Unknown selector element")}(e,t);if(r.length>1&&console.warn("selector ".concat(e," return more then one element")),0===r.length)throw new Error("selector ".concat(e," return nothing"));return r.pop()}if(e instanceof HTMLElement)return e;throw new Error("Unknown selector element")}var n=document.querySelector("#card-catalog"),o=new e,i=new t(o);o.on("productCards:receive",(function(){console.log("Событие получения карточек товаров получено"),console.log("Данные модели:",i.productList),i.productList.forEach((function(e){console.log("Рендеринг карточки для товара:",e);var t=new r(n,o,{handleClick:function handleClick(){return o.emit("card:select",e)}}).render(e);console.log("Отрендеренная карточка:",t),ensureElement(".gallery").append(t)}))}))})();
//# sourceMappingURL=main.js.map